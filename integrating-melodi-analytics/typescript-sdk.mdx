---
title: 'Typescript SDK'
---

## Initial set up
Import required modules and configure environment

```typescript
import {
  CreateExternalUserRequest,
  createFeedback,
  CreateFeedbackRequest,
  createOrUpdateThread,
  CreateThreadRequest,
} from "@melodi/melodi-sdk-typescript";
import "dotenv/config";
```

## Set up Melodi client
Your API key can be found in Settings. For more information, see [API Access](/pages/api-access).

```typescript
process.env.MELODI_API_KEY = "<YOUR_KEY>";
```

## Create a project
Projects can also be created via the UI.

```typescript
// Note: Project creation is not shown in the provided Typescript example.
// Assuming a similar function exists in the SDK.
```

## Create a thread in Melodi
Threads are a flexible data format that support customizable message types, including user, AI response, RAG lookup, and other.

For more information, see the [Create Thread API documentation](/page/create-thread).

```typescript
async function createExampleThread() {
  const externalThreadId = "typescript-sdk-example-11";
  const externalUser: CreateExternalUserRequest = {
    externalId: "testuserid1",
    name: "Greg Brown",
    email: "greg+test@melodi.fyi",
    segments: { team: "engineering" },
  };

  const createThreadRequest: CreateThreadRequest = {
    projectId: 64,
    externalId: externalThreadId,
    messages: [
      {
        externalId: "1",
        role: "user",
        content: "Hello!",
      },
      {
        externalId: "2",
        role: "assistant",
        content: "Hi!",
      },
    ],
    externalUser,
  };

  const response1 = await createOrUpdateThread(createThreadRequest);
  console.log(response1);

  const createThreadRequest2: CreateThreadRequest = {
    projectId: 64,
    externalId: externalThreadId,
    messages: [
      {
        externalId: "1",
        role: "user",
        content: "Hello!",
      },
      {
        externalId: "2",
        role: "assistant",
        content: "Hi!",
      },
      {
        externalId: "3",
        role: "user",
        content: "What is your favorite color?",
      },
      {
        externalId: "4",
        role: "tool",
        type: "json",
        jsonContent: {
          favoriteColorInfo: {
            type: "color",
            color: "blue",
          },
        },
      },
      {
        externalId: "5",
        role: "assistant",
        content: "My favorite color is blue. Thanks so much for asking!!!!",
      },
    ],
  };

  const response2 = await createOrUpdateThread(createThreadRequest2);
  console.log(response2);
}
```

This is how a thread will render in Melodi.

![Thread Render](../images/render-thread.png)

## Add feedback to the thread
```typescript
async function addFeedback() {
  const feedbackRequest: CreateFeedbackRequest = {
    externalThreadId: "typescript-sdk-example-11",
    externalMessageId: "5",
    attributes: {
      Quality: "Wonderful",
    },
    externalUser: {
      externalId: "testuserid1",
      name: "Greg Brown",
      email: "greg+test@melodi.fyi",
      segments: { team: "engineering" },
    },
  };

  const response3 = await createFeedback(feedbackRequest);
  console.log(response3);
}
```

## Create or update a user
If you are on an enterprise plan, we can work with you to manage your user data.

```typescript
// Note: User creation or update is not shown in the provided Typescript example.
// Assuming a similar function exists in the SDK.
```

```typescript
createExampleThread();
addFeedback();
```
