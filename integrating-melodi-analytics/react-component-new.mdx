---
title: 'React Component'
description: 'How to use the Melodi React component'
---

# melodi-sdk-react

A small sdk for adding Melodi's feedback react component to your app. The feedback widget lets you add thumbs up/thumbs down buttons anywhere in your app and a popover to record feedback from your users about your llm generated text. You can view responses in the Feedback Inbox in your Melodi account.

<Note>This library has `react` and `react-dom` (both v18.2 or higher) as peer dependencies.</Note>

## Getting started

### To add the melodi widget to your react app, follow these simple steps:

1. Install the library
   `npm install @melodi/melodi-sdk-react`

2. Get a publishable API key from your Melodi Account.

   - Log into your Melodi account and go to [settings](https://app.melodi.fyi/admin/settings).
   - Click "Create publishable api key"
   - Copy the newly created key

3. Add the MelodiAuthProvider with your api key

```jsx
<MelodiAuthProvider apiKey="YOUR_API_KEY_HERE">
  {children}
</MelodiAuthProvider>
```

4. Add the MelodiFeedbackWidget and pass along the relevant info

```jsx
<MelodiFeedbackWidget
  thread={{
    messages: [
      {
        role: 'user',
        content: userSubmittedText,
        type: 'markdown'
      },
      {
        role: 'assistant',
        content: aiGeneratedText,
        type: 'markdown'
      }
    ],
    projectName: 'My Project',
    metadata: {
      environment: 'production',
      feature: 'chat'
    }
  }}
  userInfo={{
    id: user.id,
    email: user.email
  }}
/>
```

5. See feedback as it comes into your [Feedback Inbox](https://app.melodi.fyi/admin/feedback-inbox)

## Usage Examples

### Basic Usage
```jsx
<MelodiFeedbackWidget
  thread={{
    messages: [
      {
        role: 'user',
        content: userSubmittedText,
        type: 'markdown'
      },
      {
        role: 'assistant',
        content: aiGeneratedText,
        type: 'markdown'
      }
    ],
    projectName: 'My Project',
    metadata: {
      environment: 'production',
      feature: 'chat'
    }
  }}
  userInfo={{
    id: user.id,
    email: user.email
  }}
/>
```

### Advanced Usage with JSON Messages
```jsx
<MelodiFeedbackWidget
  thread={{
    messages: [
      {
        role: 'user',
        content: 'Tell me a joke',
        type: 'markdown'
      },
      {
        role: 'json_tool',
        type: 'json',
        jsonContent: {
          joke_setup: 'Why did the chicken cross the road?',
          joke_punchline: 'To get to the other side!'
        },
        metadata: {
          source: 'jokes_database'
        }
      },
      {
        role: 'assistant',
        content: 'Why did the chicken cross the road? To get to the other side!',
        type: 'markdown'
      }
    ],
    projectName: 'Joke Bot',
    externalId: 'joke-conversation-123',
    metadata: {
      environment: 'production',
      feature: 'joke_generator',
      team: 'content'
    }
  }}
  userInfo={{
    id: 'user-123',
    email: 'user@example.com'
  }}
  companyName="My Company"
/>
```

## Component Props

### MelodiFeedbackWidget Props

| Prop | Type | Required | Description |
|------|------|----------|-------------|
| `thread` | ThreadProps | Yes | Configuration for the conversation thread |
| `userInfo` | UserInfo | No | Information about the current user |
| `companyName` | string | No | Your company name to display in the feedback popover |

### Message Types

Messages in a thread can be one of three types:

1. **Markdown Messages** (default)
   - Used for standard text content
   - Set `type: 'markdown'`
   - Content goes in the `content` field

2. **JSON Messages**
   - Used for structured data or tool outputs
   - Set `type: 'json'`
   - Data goes in the `jsonContent` field
   - Requires `role: 'json_tool'`

3. **Message Roles**
   - `user`: Messages from the end user
   - `assistant`: AI-generated responses
   - `json_tool`: Structured data or tool outputs

## Visual Example

Here's how your thread will appear in the Melodi dashboard:

![Thread Render](../images/render-thread.png)
